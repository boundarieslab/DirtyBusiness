<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIRTY_BUSINESS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- INTRO OVERLAY -->
<div id="intro-overlay">
    <div class="intro-content">
        <h1>DIRTY_BUSINESS</h1>
        <p class="intro-subtitle">// mapping mass movement operations</p>
        
        <div class="intro-text" data-lang-en>
            <p>This project documents the extensive network of soil, rock, and construction material movements around Oslo. Every year, millions of cubic meters of mass are excavated, transported, and deposited across the region.</p>
            
            <p>Behind these operations lies a complex web of permits, companies, and environmental impacts that often remains invisible to the public. Some operations are legal and well-regulated. Others operate in grey zones. Some are outright illegal.</p>
            
            <p>This map aims to make visible what is usually hidden — tracking where the dirt goes, who profits, and what traces are left on the landscape.</p>
        </div>
        
        <div class="intro-text" data-lang-no style="display:none;">
            <p>Dette prosjektet dokumenterer det omfattende nettverket av jord-, stein- og byggemassebevegelser rundt Oslo. Hvert år graves det ut, transporteres og deponeres millioner av kubikkmeter masse i regionen.</p>
            
            <p>Bak disse operasjonene ligger et komplekst nett av tillatelser, selskaper og miljøpåvirkninger som ofte forblir usynlig for offentligheten. Noen operasjoner er lovlige og godt regulerte. Andre opererer i gråsoner. Noen er direkte ulovlige.</p>
            
            <p>Dette kartet har som mål å synliggjøre det som vanligvis er skjult — spore hvor massene havner, hvem som tjener på det, og hvilke spor som etterlates i landskapet.</p>
        </div>
        
        <button id="enter-map">
            <span data-lang-en>Enter Map</span>
            <span data-lang-no style="display:none;">Gå til kart</span>
        </button>
        
        <div class="intro-lang">
            <span class="lang-btn active" data-lang="en">EN</span>
            <span class="lang-divider">|</span>
            <span class="lang-btn" data-lang="no">NO</span>
        </div>
    </div>
</div>

<!-- POPUP MODAL -->
<div id="popup-modal" class="modal">
    <div class="modal-content">
        <span class="modal-close">&times;</span>
        <div id="modal-body"></div>
    </div>
</div>

<!-- IMAGE LIGHTBOX -->
<div id="lightbox">
    <span class="lightbox-close">&times;</span>
    <img id="lightbox-img" src="" alt="">
    <p id="lightbox-caption"></p>
</div>

<!-- MAIN CONTAINER -->
<div id="main-container" style="display:none;">
    
    <!-- SIDEBAR -->
    <div id="sidebar">
        <div class="sidebar-header">
            <h1>DIRTY_BUSINESS</h1>
            <p class="subtitle">
                <span data-lang-en>// mass movements around Oslo</span>
                <span data-lang-no style="display:none;">// massebevegelser rundt Oslo</span>
            </p>
            <div class="lang-toggle">
                <span class="lang-btn active" data-lang="en">EN</span>
                <span class="lang-divider">|</span>
                <span class="lang-btn" data-lang="no">NO</span>
            </div>
        </div>
        
        <div class="sidebar-scroll">
            <!-- LEGEND -->
            <div class="sidebar-section">
                <h3>
                    <span data-lang-en>Legend</span>
                    <span data-lang-no style="display:none;">Tegnforklaring</span>
                </h3>
                <div class="legend">
                    <div class="legend-item">
                        <span class="legend-icon active"></span>
                        <span data-lang-en>Active</span>
                        <span data-lang-no style="display:none;">Aktiv</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon inactive"></span>
                        <span data-lang-en>Inactive</span>
                        <span data-lang-no style="display:none;">Inaktiv</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon illegal"></span>
                        <span data-lang-en>Illegal/Suspected</span>
                        <span data-lang-no style="display:none;">Ulovlig/Mistenkt</span>
                    </div>
                </div>
            </div>
            
            <!-- PLACES GALLERY -->
            <div class="sidebar-section">
                <h3>
                    <span data-lang-en>Locations</span>
                    <span data-lang-no style="display:none;">Steder</span>
                </h3>
                <div id="gallery-grid"></div>
            </div>
            
            <!-- ABOUT -->
            <div class="sidebar-section">
                <h3>
                    <span data-lang-en>About</span>
                    <span data-lang-no style="display:none;">Om</span>
                </h3>
                <p class="about-text">
                    <span data-lang-en>A project by Laboratory for Urban Boundaries. Click markers on the map or images below to explore each site.</span>
                    <span data-lang-no style="display:none;">Et prosjekt av Laboratory for Urban Boundaries. Klikk på markører på kartet eller bilder nedenfor for å utforske hvert sted.</span>
                </p>
                <button id="show-intro">
                    <span data-lang-en>Read full introduction</span>
                    <span data-lang-no style="display:none;">Les full introduksjon</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- MAP -->
    <div id="map"></div>
    
    <!-- MAP CONTROLS -->
    <div id="map-controls">
        <div class="control-section">
            <h4>
                <span data-lang-en>Base Map</span>
                <span data-lang-no style="display:none;">Basiskart</span>
            </h4>
            <label><input type="radio" name="basemap" value="dark" checked> 
                <span data-lang-en>Dark</span>
                <span data-lang-no style="display:none;">Mørk</span>
            </label>
            <label><input type="radio" name="basemap" value="satellite"> 
                <span data-lang-en>Satellite</span>
                <span data-lang-no style="display:none;">Satellitt</span>
            </label>
            <label><input type="radio" name="basemap" value="topo"> 
                <span data-lang-en>Topographic</span>
                <span data-lang-no style="display:none;">Topografisk</span>
            </label>
        </div>
        
        <div class="control-section">
            <h4>
                <span data-lang-en>Overlays</span>
                <span data-lang-no style="display:none;">Overlegg</span>
            </h4>
            <label><input type="checkbox" id="toggle-hillshade" checked> 
                <span data-lang-en>Terrain Hillshade</span>
                <span data-lang-no style="display:none;">Terrengskygge</span>
            </label>
            <label><input type="checkbox" id="toggle-contaminated"> 
                <span data-lang-en>Contaminated Ground</span>
                <span data-lang-no style="display:none;">Forurenset grunn</span>
            </label>
        </div>
        
        <div class="control-section">
            <h4>
                <span data-lang-en>Hillshade opacity</span>
                <span data-lang-no style="display:none;">Terrengskygge styrke</span>
            </h4>
            <input type="range" id="hillshade-opacity" min="0" max="100" value="50">
        </div>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="settings.js"></script>
<script src="script.js"></script>
</body>
</html>
